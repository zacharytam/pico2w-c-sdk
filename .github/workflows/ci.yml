    - name: Build project for Pico W
      run: |
        # Clean build directory
        rm -rf build
        mkdir -p build
        cd build
        
        # Configure with binary info enabled
        cmake -DPICO_SDK_PATH=/tmp/pico-sdk \
              -DPICO_BOARD=pico_w \
              -DPICO_PLATFORM=rp2040 \
              -DPICO_ENABLE_BINARY_INFO=1 \
              ..
        
        # Build
        make -j4
        
        # Verify UF2 file has proper structure
        echo "=== Checking UF2 file ==="
        if [ -f "pico2w_lte_router.uf2" ]; then
          echo "‚úÖ UF2 file exists"
          echo "üìä File size: $(ls -lh pico2w_lte_router.uf2)"
          
          # Check UF2 header for proper family ID
          echo "üîç Checking UF2 header:"
          hexdump -C pico2w_lte_router.uf2 | head -3
          
          # Verify it contains the RP2040 family ID
          if hexdump -C pico2w_lte_router.uf2 | head -3 | grep -q "56 ff 8b e4"; then
            echo "‚úÖ UF2 has correct RP2040 family ID"
          else
            echo "‚ùå UF2 missing RP2040 family ID - auto-reboot may not work"
          fi
        else
          echo "‚ùå No UF2 file found!"
          exit 1
        fi
